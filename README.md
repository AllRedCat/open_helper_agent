# office_ai

A small C++ example app that embeds `llama.cpp` as a CMake subproject and runs an on-device LLM (GGUF) to answer a prompt.

## How it works
At a high level, `main.cpp`:

1. Silences `llama.cpp` logging via `llama_log_set`.
2. Initializes the backend with `llama_backend_init()`.
3. Loads a GGUF model from `./llama.cpp/models/qwen2-0.5b-instruct-q4_k_m.gguf`.
4. Creates a `llama_context` with `n_ctx = 2048`.
5. Tokenizes a prompt and creates a single decode batch.
6. Repeats: `llama_decode(...)` → sample next token → print token piece to stdout.
7. Frees sampler/context/model and shuts down the backend.

> Note: user-facing messages are currently in Portuguese.

## Project structure
- `CMakeLists.txt`: Top-level build; adds `llama.cpp` and builds the `program` executable.
- `main.cpp`: Application entrypoint (model load, tokenization, decoding, sampling, printing).
- `include/`: Local headers (e.g. `progress.h`).
- `src/`: Local sources (e.g. `progress.cpp`).
- `llama.cpp/`: Vendored `llama.cpp` source tree, built as part of this project.
- `build/`: Out-of-source build directory (generated by CMake).

## Prerequisites
- CMake 3.20+
- A C++17 compiler (Apple Clang / LLVM Clang)
- (Optional) Ninja for faster builds

## Build
From the repository root:

```sh
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build -j
```

## Run
Run from the repository root (so the relative model path resolves correctly):

```sh
./build/program
```

## Changing the model, prompt, or sampling
All of these live in `main.cpp`:

- **Model path**: update `model_path`.
- **Prompt**: update `prompt`.
- **Sampling**: adjust the sampler chain (currently temperature + distribution/seed).
- **Context length**: adjust `ctx_params.n_ctx`.

## Troubleshooting
- If you see `Erro ao carregar o modelo!`, confirm the GGUF exists at `llama.cpp/models/qwen2-0.5b-instruct-q4_k_m.gguf` and that you are running `./build/program` from the repo root.
- `src/progress.cpp` is currently not compiled by default. If you want to include it, uncomment `${SOURCES}` in `CMakeLists.txt`.
